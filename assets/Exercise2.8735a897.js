import{Q as y}from"./QSpinnerAudio.d3876b3e.js";import{E as S}from"./ExerciseContainer.0e91ed6c.js";import{s as A}from"./transform.36d866f3.js";import{S as C,a as w}from"./sdmxDataParser.3615c5ff.js";import{t as E,e as _}from"./time.fcfab602.js";import{d as O,q as D,a as R,o as d,c as f,w as V,b as m,t as g,s as B}from"./index.e60a0f9a.js";import{l as N}from"./linear.f42d7650.js";import{a as P,b as k}from"./axis.0fbd6d3f.js";import"./use-spinner.50829ec2.js";import"./use-dark.6d337df7.js";import"./render.c81647ef.js";import"./init.0b4a962a.js";const I="https://data.un.org/ws/rest/data/UIS,DF_UNData_UIS,1.1/.ED_FSOABS.....FRA+DEU+NOR./ALL/?detail=full&dimensionAtObservation=TIME_PERIOD",W=O({__name:"Exercise2",setup(M){const c=D(!0);function u(e){const o={timePeriods:e.getTimePeriods().map(a=>new Date(a.id)),observations:[]};return e.getRefAreas().forEach(a=>{const l=e.getObservationsByRefArea(a.id),r=l?Object.values(l).map(i=>i[0]):[];o.observations.push({refArea:a.name,observationValues:r})}),o}R(async()=>{fetch(I,{method:"GET",headers:{Accept:"text/json"}}).then(e=>e.json()).then(e=>{const t=new C(JSON.stringify(e)),o=u(t);c.value=!1,h(o)})});function h(e){const t=new w(600,400,{top:20,right:20,bottom:20,left:50,xlabel:20,ylabel:20}),o=Math.max(...e.observations.flatMap(s=>s.observationValues)),n=E().rangeRound([0,t.width]),a=N().rangeRound([t.height,0]);n.domain(_(e.timePeriods,s=>s)),a.domain([0,o]);const r=A("#plotContainer").attr("width",t.svgWidth).attr("height",t.svgHeight).append("g").attr("transform",`translate(${t.margin.left+t.margin.xlabel}, ${t.margin.top})`);r.append("g").attr("transform",`translate(0, ${t.height})`).call(P(n).ticks(5)),r.append("g").call(k(a)),r.append("text").attr("text-anchor","middle").attr("x",t.width/2).attr("y",t.svgHeight-t.margin.top).text("Year"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",0-t.height/2).attr("y",0-t.margin.left).text("Students Abroad");const i=["#69b3a2","#ff6347","#4682b4"];e.observations.forEach((s,x)=>{const b=i[x%i.length];r.append("g").selectAll("circle").data(s.observationValues).enter().append("circle").attr("cx",(p,v)=>n(e.timePeriods[v])).attr("cy",p=>a(p)).attr("r",4).style("fill",b)})}return(e,t)=>(d(),f(S,null,{default:V(()=>[t[0]||(t[0]=m("h2",null,[g(" Students from a given country "),m("br"),g(" studying abroad - Scatter ")],-1)),c.value?(d(),f(y,{key:0,color:"primary",size:"10em"})):B("",!0),t[1]||(t[1]=m("svg",{id:"plotContainer"},null,-1))]),_:1}))}});export{W as default};
