import{Q as bt}from"./QSpinnerAudio.cd962399.js";import{E as ni}from"./ExerciseContainer.b0ab4103.js";import{S as st,e as ti,f as ii,s as Mn}from"./transform.3ec6140b.js";import{S as Lt}from"./svgConfigs.64a9696a.js";import{d as et,a as rt,o as on,v as ot,x as ei,q as zn,c as Fn,w as ri,b as xn,s as In,k as oi,y as li}from"./index.36e3ba2a.js";import{l as ai}from"./linear.be5e5768.js";import{b as ui}from"./band.628a8d04.js";import{a as si,b as ci}from"./axis.0fbd6d3f.js";import"./use-spinner.b248c651.js";import"./use-dark.03be42c5.js";import"./render.79ae91dc.js";import"./init.0b4a962a.js";import"./ordinal.29744db8.js";class b{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const l=e[r],a=t+l,u=Math.abs(t)<Math.abs(l)?t-(a-l):l-(a-t);u&&(e[i++]=u),t=a}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,l,a=0;if(e>0){for(a=t[--e];e>0&&(i=a,r=t[--e],a=i+r,l=r-(a-i),!l););e>0&&(l<0&&t[e-1]<0||l>0&&t[e-1]>0)&&(r=l*2,i=a+r,r==i-a&&(a=i))}return a}}function*fi(n){for(const t of n)yield*t}function zt(n){return Array.from(fi(n))}function pi(n){return typeof n=="string"?new st([document.querySelectorAll(n)],[document.documentElement]):new st([ii(n)],ti)}var C=1e-6,hi=1e-12,$=Math.PI,G=$/2,ct=$/4,q=$*2,H=180/$,I=$/180,L=Math.abs,Ft=Math.atan,vn=Math.atan2,F=Math.cos,gi=Math.exp,vi=Math.log,x=Math.sin,di=Math.sign||function(n){return n>0?1:n<0?-1:0},tn=Math.sqrt,Si=Math.tan;function Ei(n){return n>1?0:n<-1?$:Math.acos(n)}function dn(n){return n>1?G:n<-1?-G:Math.asin(n)}function J(){}function Rn(n,t){n&&pt.hasOwnProperty(n.type)&&pt[n.type](n,t)}var ft={Feature:function(n,t){Rn(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)Rn(e[i].geometry,t)}},pt={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Hn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Hn(e[i],t,0)},Polygon:function(n,t){ht(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)ht(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)Rn(e[i],t)}};function Hn(n,t,e){var i=-1,r=n.length-e,l;for(t.lineStart();++i<r;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function ht(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Hn(n[e],t,1);t.polygonEnd()}function rn(n,t){n&&ft.hasOwnProperty(n.type)?ft[n.type](n,t):Rn(n,t)}function qn(n){return[vn(n[1],n[0]),dn(n[2])]}function an(n){var t=n[0],e=n[1],i=F(e);return[i*F(t),i*x(t),x(e)]}function wn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function $n(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function On(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function mn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Kn(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Jn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Vn(n,t){return L(n)>$&&(n-=Math.round(n/q)*q),[n,t]}Vn.invert=Vn;function xt(n,t,e){return(n%=q)?t||e?Jn(vt(n),dt(t,e)):vt(n):t||e?dt(t,e):Vn}function gt(n){return function(t,e){return t+=n,L(t)>$&&(t-=Math.round(t/q)*q),[t,e]}}function vt(n){var t=gt(n);return t.invert=gt(-n),t}function dt(n,t){var e=F(n),i=x(n),r=F(t),l=x(t);function a(u,v){var h=F(v),o=F(u)*h,s=x(u)*h,c=x(v),f=c*e+o*i;return[vn(s*r-f*l,o*e-c*i),dn(f*r+s*l)]}return a.invert=function(u,v){var h=F(v),o=F(u)*h,s=x(u)*h,c=x(v),f=c*r-s*l;return[vn(s*r+c*l,o*e+f*i),dn(f*e-o*i)]},a}function wi(n){n=xt(n[0]*I,n[1]*I,n.length>2?n[2]*I:0);function t(e){return e=n(e[0]*I,e[1]*I),e[0]*=H,e[1]*=H,e}return t.invert=function(e){return e=n.invert(e[0]*I,e[1]*I),e[0]*=H,e[1]*=H,e},t}function mi(n,t,e,i,r,l){if(!!e){var a=F(t),u=x(t),v=i*e;r==null?(r=t+i*q,l=t-v/2):(r=St(a,r),l=St(a,l),(i>0?r<l:r>l)&&(r+=i*q));for(var h,o=r;i>0?o>l:o<l;o-=v)h=qn([a,-u*F(o),-u*x(o)]),n.point(h[0],h[1])}}function St(n,t){t=an(t),t[0]-=n,Kn(t);var e=Ei(-t[1]);return((-t[2]<0?-e:e)+q-C)%q}function It(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:J,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Pn(n,t){return L(n[0]-t[0])<C&&L(n[1]-t[1])<C}function yn(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Ot(n,t,e,i,r){var l=[],a=[],u,v;if(n.forEach(function(g){if(!((w=g.length-1)<=0)){var w,d=g[0],M=g[w],E;if(Pn(d,M)){if(!d[2]&&!M[2]){for(r.lineStart(),u=0;u<w;++u)r.point((d=g[u])[0],d[1]);r.lineEnd();return}M[0]+=2*C}l.push(E=new yn(d,g,null,!0)),a.push(E.o=new yn(d,null,E,!1)),l.push(E=new yn(M,g,null,!1)),a.push(E.o=new yn(M,null,E,!0))}}),!!l.length){for(a.sort(t),Et(l),Et(a),u=0,v=a.length;u<v;++u)a[u].e=e=!e;for(var h=l[0],o,s;;){for(var c=h,f=!0;c.v;)if((c=c.n)===h)return;o=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(f)for(u=0,v=o.length;u<v;++u)r.point((s=o[u])[0],s[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(f)for(o=c.p.z,u=o.length-1;u>=0;--u)r.point((s=o[u])[0],s[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,o=c.z,f=!f}while(!c.v);r.lineEnd()}}}function Et(n){if(!!(t=n.length)){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Tn(n){return L(n[0])<=$?n[0]:di(n[0])*((L(n[0])+$)%q-$)}function yi(n,t){var e=Tn(t),i=t[1],r=x(i),l=[x(e),-F(e),0],a=0,u=0,v=new b;r===1?i=G+C:r===-1&&(i=-G-C);for(var h=0,o=n.length;h<o;++h)if(!!(c=(s=n[h]).length))for(var s,c,f=s[c-1],g=Tn(f),w=f[1]/2+ct,d=x(w),M=F(w),E=0;E<c;++E,g=S,d=P,M=W,f=y){var y=s[E],S=Tn(y),_=y[1]/2+ct,P=x(_),W=F(_),N=S-g,D=N>=0?1:-1,A=D*N,m=A>$,T=d*P;if(v.add(vn(T*D*x(A),M*W+T*F(A))),a+=m?N+D*q:N,m^g>=e^S>=e){var z=$n(an(f),an(y));Kn(z);var k=$n(l,z);Kn(k);var p=(m^N>=0?-1:1)*dn(k[2]);(i>p||i===p&&(z[0]||z[1]))&&(u+=m^N>=0?1:-1)}}return(a<-C||a<C&&v<-hi)^u&1}function Tt(n,t,e,i){return function(r){var l=t(r),a=It(),u=t(a),v=!1,h,o,s,c={point:f,lineStart:w,lineEnd:d,polygonStart:function(){c.point=M,c.lineStart=E,c.lineEnd=y,o=[],h=[]},polygonEnd:function(){c.point=f,c.lineStart=w,c.lineEnd=d,o=zt(o);var S=yi(h,i);o.length?(v||(r.polygonStart(),v=!0),Ot(o,Pi,S,e,r)):S&&(v||(r.polygonStart(),v=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),v&&(r.polygonEnd(),v=!1),o=h=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(S,_){n(S,_)&&r.point(S,_)}function g(S,_){l.point(S,_)}function w(){c.point=g,l.lineStart()}function d(){c.point=f,l.lineEnd()}function M(S,_){s.push([S,_]),u.point(S,_)}function E(){u.lineStart(),s=[]}function y(){M(s[0][0],s[0][1]),u.lineEnd();var S=u.clean(),_=a.result(),P,W=_.length,N,D,A;if(s.pop(),h.push(s),s=null,!!W){if(S&1){if(D=_[0],(N=D.length-1)>0){for(v||(r.polygonStart(),v=!0),r.lineStart(),P=0;P<N;++P)r.point((A=D[P])[0],A[1]);r.lineEnd()}return}W>1&&S&2&&_.push(_.pop().concat(_.shift())),o.push(_.filter(_i))}}return c}}function _i(n){return n.length>1}function Pi(n,t){return((n=n.x)[0]<0?n[1]-G-C:G-n[1])-((t=t.x)[0]<0?t[1]-G-C:G-t[1])}var wt=Tt(function(){return!0},Mi,$i,[-$,-G]);function Mi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,a){var u=l>0?$:-$,v=L(l-t);L(v-$)<C?(n.point(t,e=(e+a)/2>0?G:-G),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(u,e),n.point(l,e),r=0):i!==u&&v>=$&&(L(t-i)<C&&(t-=i*C),L(l-u)<C&&(l-=u*C),e=Ri(t,e,l,a),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(u,e),r=0),n.point(t=l,e=a),i=u},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function Ri(n,t,e,i){var r,l,a=x(n-e);return L(a)>C?Ft((x(t)*(l=F(i))*x(e)-x(i)*(r=F(t))*x(n))/(r*l*a)):(t+i)/2}function $i(n,t,e,i){var r;if(n==null)r=e*G,i.point(-$,r),i.point(0,r),i.point($,r),i.point($,0),i.point($,-r),i.point(0,-r),i.point(-$,-r),i.point(-$,0),i.point(-$,r);else if(L(n[0]-t[0])>C){var l=n[0]<t[0]?$:-$;r=e*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(t[0],t[1])}function Ni(n){var t=F(n),e=2*I,i=t>0,r=L(t)>C;function l(o,s,c,f){mi(f,n,e,c,o,s)}function a(o,s){return F(o)*F(s)>t}function u(o){var s,c,f,g,w;return{lineStart:function(){g=f=!1,w=1},point:function(d,M){var E=[d,M],y,S=a(d,M),_=i?S?0:h(d,M):S?h(d+(d<0?$:-$),M):0;if(!s&&(g=f=S)&&o.lineStart(),S!==f&&(y=v(s,E),(!y||Pn(s,y)||Pn(E,y))&&(E[2]=1)),S!==f)w=0,S?(o.lineStart(),y=v(E,s),o.point(y[0],y[1])):(y=v(s,E),o.point(y[0],y[1],2),o.lineEnd()),s=y;else if(r&&s&&i^S){var P;!(_&c)&&(P=v(E,s,!0))&&(w=0,i?(o.lineStart(),o.point(P[0][0],P[0][1]),o.point(P[1][0],P[1][1]),o.lineEnd()):(o.point(P[1][0],P[1][1]),o.lineEnd(),o.lineStart(),o.point(P[0][0],P[0][1],3)))}S&&(!s||!Pn(s,E))&&o.point(E[0],E[1]),s=E,f=S,c=_},lineEnd:function(){f&&o.lineEnd(),s=null},clean:function(){return w|(g&&f)<<1}}}function v(o,s,c){var f=an(o),g=an(s),w=[1,0,0],d=$n(f,g),M=wn(d,d),E=d[0],y=M-E*E;if(!y)return!c&&o;var S=t*M/y,_=-t*E/y,P=$n(w,d),W=mn(w,S),N=mn(d,_);On(W,N);var D=P,A=wn(W,D),m=wn(D,D),T=A*A-m*(wn(W,W)-1);if(!(T<0)){var z=tn(T),k=mn(D,(-A-z)/m);if(On(k,W),k=qn(k),!c)return k;var p=o[0],R=s[0],O=o[1],B=s[1],K;R<p&&(K=p,p=R,R=K);var sn=R-p,Z=L(sn-$)<C,j=Z||sn<C;if(!Z&&B<O&&(K=O,O=B,B=K),j?Z?O+B>0^k[1]<(L(k[0]-p)<C?O:B):O<=k[1]&&k[1]<=B:sn>$^(p<=k[0]&&k[0]<=R)){var U=mn(D,(-A+z)/m);return On(U,W),[k,qn(U)]}}}function h(o,s){var c=i?n:$-n,f=0;return o<-c?f|=1:o>c&&(f|=2),s<-c?f|=4:s>c&&(f|=8),f}return Tt(a,u,l,i?[0,-n]:[-$,n-$])}function Di(n,t,e,i,r,l){var a=n[0],u=n[1],v=t[0],h=t[1],o=0,s=1,c=v-a,f=h-u,g;if(g=e-a,!(!c&&g>0)){if(g/=c,c<0){if(g<o)return;g<s&&(s=g)}else if(c>0){if(g>s)return;g>o&&(o=g)}if(g=r-a,!(!c&&g<0)){if(g/=c,c<0){if(g>s)return;g>o&&(o=g)}else if(c>0){if(g<o)return;g<s&&(s=g)}if(g=i-u,!(!f&&g>0)){if(g/=f,f<0){if(g<o)return;g<s&&(s=g)}else if(f>0){if(g>s)return;g>o&&(o=g)}if(g=l-u,!(!f&&g<0)){if(g/=f,f<0){if(g>s)return;g>o&&(o=g)}else if(f>0){if(g<o)return;g<s&&(s=g)}return o>0&&(n[0]=a+o*c,n[1]=u+o*f),s<1&&(t[0]=a+s*c,t[1]=u+s*f),!0}}}}}var cn=1e9,_n=-cn;function Wi(n,t,e,i){function r(h,o){return n<=h&&h<=e&&t<=o&&o<=i}function l(h,o,s,c){var f=0,g=0;if(h==null||(f=a(h,s))!==(g=a(o,s))||v(h,o)<0^s>0)do c.point(f===0||f===3?n:e,f>1?i:t);while((f=(f+s+4)%4)!==g);else c.point(o[0],o[1])}function a(h,o){return L(h[0]-n)<C?o>0?0:3:L(h[0]-e)<C?o>0?2:1:L(h[1]-t)<C?o>0?1:0:o>0?3:2}function u(h,o){return v(h.x,o.x)}function v(h,o){var s=a(h,1),c=a(o,1);return s!==c?s-c:s===0?o[1]-h[1]:s===1?h[0]-o[0]:s===2?h[1]-o[1]:o[0]-h[0]}return function(h){var o=h,s=It(),c,f,g,w,d,M,E,y,S,_,P,W={point:N,lineStart:T,lineEnd:z,polygonStart:A,polygonEnd:m};function N(p,R){r(p,R)&&o.point(p,R)}function D(){for(var p=0,R=0,O=f.length;R<O;++R)for(var B=f[R],K=1,sn=B.length,Z=B[0],j,U,En=Z[0],en=Z[1];K<sn;++K)j=En,U=en,Z=B[K],En=Z[0],en=Z[1],U<=i?en>i&&(En-j)*(i-U)>(en-U)*(n-j)&&++p:en<=i&&(En-j)*(i-U)<(en-U)*(n-j)&&--p;return p}function A(){o=s,c=[],f=[],P=!0}function m(){var p=D(),R=P&&p,O=(c=zt(c)).length;(R||O)&&(h.polygonStart(),R&&(h.lineStart(),l(null,null,1,h),h.lineEnd()),O&&Ot(c,u,p,l,h),h.polygonEnd()),o=h,c=f=g=null}function T(){W.point=k,f&&f.push(g=[]),_=!0,S=!1,E=y=NaN}function z(){c&&(k(w,d),M&&S&&s.rejoin(),c.push(s.result())),W.point=N,S&&o.lineEnd()}function k(p,R){var O=r(p,R);if(f&&g.push([p,R]),_)w=p,d=R,M=O,_=!1,O&&(o.lineStart(),o.point(p,R));else if(O&&S)o.point(p,R);else{var B=[E=Math.max(_n,Math.min(cn,E)),y=Math.max(_n,Math.min(cn,y))],K=[p=Math.max(_n,Math.min(cn,p)),R=Math.max(_n,Math.min(cn,R))];Di(B,K,n,t,e,i)?(S||(o.lineStart(),o.point(B[0],B[1])),o.point(K[0],K[1]),O||o.lineEnd(),P=!1):O&&(o.lineStart(),o.point(p,R),P=!1)}E=p,y=R,S=O}return W}}var Xn=n=>n,Bn=new b,Yn=new b,Bt,Gt,Zn,Un,Q={point:J,lineStart:J,lineEnd:J,polygonStart:function(){Q.lineStart=ki,Q.lineEnd=Ai},polygonEnd:function(){Q.lineStart=Q.lineEnd=Q.point=J,Bn.add(L(Yn)),Yn=new b},result:function(){var n=Bn/2;return Bn=new b,n}};function ki(){Q.point=Ci}function Ci(n,t){Q.point=Ht,Bt=Zn=n,Gt=Un=t}function Ht(n,t){Yn.add(Un*n-Zn*t),Zn=n,Un=t}function Ai(){Ht(Bt,Gt)}var mt=Q,un=1/0,Nn=un,Sn=-un,Dn=Sn,Li={point:zi,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var n=[[un,Nn],[Sn,Dn]];return Sn=Dn=-(Nn=un=1/0),n}};function zi(n,t){n<un&&(un=n),n>Sn&&(Sn=n),t<Nn&&(Nn=t),t>Dn&&(Dn=t)}var Wn=Li,Qn=0,jn=0,fn=0,kn=0,Cn=0,ln=0,bn=0,nt=0,pn=0,qt,Kt,X,Y,V={point:nn,lineStart:yt,lineEnd:_t,polygonStart:function(){V.lineStart=Ii,V.lineEnd=Oi},polygonEnd:function(){V.point=nn,V.lineStart=yt,V.lineEnd=_t},result:function(){var n=pn?[bn/pn,nt/pn]:ln?[kn/ln,Cn/ln]:fn?[Qn/fn,jn/fn]:[NaN,NaN];return Qn=jn=fn=kn=Cn=ln=bn=nt=pn=0,n}};function nn(n,t){Qn+=n,jn+=t,++fn}function yt(){V.point=Fi}function Fi(n,t){V.point=xi,nn(X=n,Y=t)}function xi(n,t){var e=n-X,i=t-Y,r=tn(e*e+i*i);kn+=r*(X+n)/2,Cn+=r*(Y+t)/2,ln+=r,nn(X=n,Y=t)}function _t(){V.point=nn}function Ii(){V.point=Ti}function Oi(){Jt(qt,Kt)}function Ti(n,t){V.point=Jt,nn(qt=X=n,Kt=Y=t)}function Jt(n,t){var e=n-X,i=t-Y,r=tn(e*e+i*i);kn+=r*(X+n)/2,Cn+=r*(Y+t)/2,ln+=r,r=Y*n-X*t,bn+=r*(X+n),nt+=r*(Y+t),pn+=r*3,nn(X=n,Y=t)}var Pt=V;function Vt(n){this._context=n}Vt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,q);break}}},result:J};var tt=new b,Gn,Xt,Yt,hn,gn,An={point:J,lineStart:function(){An.point=Bi},lineEnd:function(){Gn&&Zt(Xt,Yt),An.point=J},polygonStart:function(){Gn=!0},polygonEnd:function(){Gn=null},result:function(){var n=+tt;return tt=new b,n}};function Bi(n,t){An.point=Zt,Xt=hn=n,Yt=gn=t}function Zt(n,t){hn-=n,gn-=t,tt.add(tn(hn*hn+gn*gn)),hn=n,gn=t}var Mt=An;let Rt,Ln,$t,Nt;class Dt{constructor(t){this._append=t==null?Ut:Gi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==$t||this._append!==Ln){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,$t=i,Ln=this._append,Nt=this._,this._=r}this._+=Nt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Ut(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Gi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Ut;if(t!==Rt){const e=10**t;Rt=t,Ln=function(r){let l=1;this._+=r[0];for(const a=r.length;l<a;++l)this._+=Math.round(arguments[l]*e)/e+r[l]}}return Ln}function Hi(n,t){let e=3,i=4.5,r,l;function a(u){return u&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),rn(u,r(l))),l.result()}return a.area=function(u){return rn(u,r(mt)),mt.result()},a.measure=function(u){return rn(u,r(Mt)),Mt.result()},a.bounds=function(u){return rn(u,r(Wn)),Wn.result()},a.centroid=function(u){return rn(u,r(Pt)),Pt.result()},a.projection=function(u){return arguments.length?(r=u==null?(n=null,Xn):(n=u).stream,a):n},a.context=function(u){return arguments.length?(l=u==null?(t=null,new Dt(e)):new Vt(t=u),typeof i!="function"&&l.pointRadius(i),a):t},a.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(l.pointRadius(+u),+u),a):i},a.digits=function(u){if(!arguments.length)return e;if(u==null)e=null;else{const v=Math.floor(u);if(!(v>=0))throw new RangeError(`invalid digits: ${u}`);e=v}return t===null&&(l=new Dt(e)),a},a.projection(n).digits(e).context(t)}function lt(n){return function(t){var e=new it;for(var i in n)e[i]=n[i];return e.stream=t,e}}function it(){}it.prototype={constructor:it,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function at(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),rn(e,n.stream(Wn)),t(Wn.result()),i!=null&&n.clipExtent(i),n}function Qt(n,t,e){return at(n,function(i){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),u=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,v=+t[0][1]+(l-a*(i[1][1]+i[0][1]))/2;n.scale(150*a).translate([u,v])},e)}function qi(n,t,e){return Qt(n,[[0,0],t],e)}function Ki(n,t,e){return at(n,function(i){var r=+t,l=r/(i[1][0]-i[0][0]),a=(r-l*(i[1][0]+i[0][0]))/2,u=-l*i[0][1];n.scale(150*l).translate([a,u])},e)}function Ji(n,t,e){return at(n,function(i){var r=+t,l=r/(i[1][1]-i[0][1]),a=-l*i[0][0],u=(r-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([a,u])},e)}var Wt=16,Vi=F(30*I);function kt(n,t){return+t?Yi(n,t):Xi(n)}function Xi(n){return lt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Yi(n,t){function e(i,r,l,a,u,v,h,o,s,c,f,g,w,d){var M=h-i,E=o-r,y=M*M+E*E;if(y>4*t&&w--){var S=a+c,_=u+f,P=v+g,W=tn(S*S+_*_+P*P),N=dn(P/=W),D=L(L(P)-1)<C||L(l-s)<C?(l+s)/2:vn(_,S),A=n(D,N),m=A[0],T=A[1],z=m-i,k=T-r,p=E*z-M*k;(p*p/y>t||L((M*z+E*k)/y-.5)>.3||a*c+u*f+v*g<Vi)&&(e(i,r,l,a,u,v,m,T,D,S/=W,_/=W,P,w,d),d.point(m,T),e(m,T,D,S,_,P,h,o,s,c,f,g,w,d))}}return function(i){var r,l,a,u,v,h,o,s,c,f,g,w,d={point:M,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),d.lineStart=_},polygonEnd:function(){i.polygonEnd(),d.lineStart=E}};function M(N,D){N=n(N,D),i.point(N[0],N[1])}function E(){s=NaN,d.point=y,i.lineStart()}function y(N,D){var A=an([N,D]),m=n(N,D);e(s,c,o,f,g,w,s=m[0],c=m[1],o=N,f=A[0],g=A[1],w=A[2],Wt,i),i.point(s,c)}function S(){d.point=M,i.lineEnd()}function _(){E(),d.point=P,d.lineEnd=W}function P(N,D){y(r=N,D),l=s,a=c,u=f,v=g,h=w,d.point=y}function W(){e(s,c,o,f,g,w,l,a,r,u,v,h,Wt,i),d.lineEnd=S,S()}return d}}var Zi=lt({point:function(n,t){this.stream.point(n*I,t*I)}});function Ui(n){return lt({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function Qi(n,t,e,i,r){function l(a,u){return a*=i,u*=r,[t+n*a,e-n*u]}return l.invert=function(a,u){return[(a-t)/n*i,(e-u)/n*r]},l}function Ct(n,t,e,i,r,l){if(!l)return Qi(n,t,e,i,r);var a=F(l),u=x(l),v=a*n,h=u*n,o=a/n,s=u/n,c=(u*e-a*t)/n,f=(u*t+a*e)/n;function g(w,d){return w*=i,d*=r,[v*w-h*d+t,e-h*w-v*d]}return g.invert=function(w,d){return[i*(o*w-s*d+c),r*(f-s*w-o*d)]},g}function ji(n){return bi(function(){return n})()}function bi(n){var t,e=150,i=480,r=250,l=0,a=0,u=0,v=0,h=0,o,s=0,c=1,f=1,g=null,w=wt,d=null,M,E,y,S=Xn,_=.5,P,W,N,D,A;function m(p){return N(p[0]*I,p[1]*I)}function T(p){return p=N.invert(p[0],p[1]),p&&[p[0]*H,p[1]*H]}m.stream=function(p){return D&&A===p?D:D=Zi(Ui(o)(w(P(S(A=p)))))},m.preclip=function(p){return arguments.length?(w=p,g=void 0,k()):w},m.postclip=function(p){return arguments.length?(S=p,d=M=E=y=null,k()):S},m.clipAngle=function(p){return arguments.length?(w=+p?Ni(g=p*I):(g=null,wt),k()):g*H},m.clipExtent=function(p){return arguments.length?(S=p==null?(d=M=E=y=null,Xn):Wi(d=+p[0][0],M=+p[0][1],E=+p[1][0],y=+p[1][1]),k()):d==null?null:[[d,M],[E,y]]},m.scale=function(p){return arguments.length?(e=+p,z()):e},m.translate=function(p){return arguments.length?(i=+p[0],r=+p[1],z()):[i,r]},m.center=function(p){return arguments.length?(l=p[0]%360*I,a=p[1]%360*I,z()):[l*H,a*H]},m.rotate=function(p){return arguments.length?(u=p[0]%360*I,v=p[1]%360*I,h=p.length>2?p[2]%360*I:0,z()):[u*H,v*H,h*H]},m.angle=function(p){return arguments.length?(s=p%360*I,z()):s*H},m.reflectX=function(p){return arguments.length?(c=p?-1:1,z()):c<0},m.reflectY=function(p){return arguments.length?(f=p?-1:1,z()):f<0},m.precision=function(p){return arguments.length?(P=kt(W,_=p*p),k()):tn(_)},m.fitExtent=function(p,R){return Qt(m,p,R)},m.fitSize=function(p,R){return qi(m,p,R)},m.fitWidth=function(p,R){return Ki(m,p,R)},m.fitHeight=function(p,R){return Ji(m,p,R)};function z(){var p=Ct(e,0,0,c,f,s).apply(null,t(l,a)),R=Ct(e,i-p[0],r-p[1],c,f,s);return o=xt(u,v,h),W=Jn(t,R),N=Jn(o,W),P=kt(W,_),k()}function k(){return D=A=null,m}return function(){return t=n.apply(this,arguments),m.invert=t.invert&&T,z()}}function ut(n,t){return[n,vi(Si((G+t)/2))]}ut.invert=function(n,t){return[n,2*Ft(gi(t))-G]};function ne(){return te(ut).scale(961/q)}function te(n){var t=ji(n),e=t.center,i=t.scale,r=t.translate,l=t.clipExtent,a=null,u,v,h;t.scale=function(s){return arguments.length?(i(s),o()):i()},t.translate=function(s){return arguments.length?(r(s),o()):r()},t.center=function(s){return arguments.length?(e(s),o()):e()},t.clipExtent=function(s){return arguments.length?(s==null?a=u=v=h=null:(a=+s[0][0],u=+s[0][1],v=+s[1][0],h=+s[1][1]),o()):a==null?null:[[a,u],[v,h]]};function o(){var s=$*i(),c=t(wi(t.rotate()).invert([0,0]));return l(a==null?[[c[0]-s,c[1]-s],[c[0]+s,c[1]+s]]:n===ut?[[Math.max(c[0]-s,a),u],[Math.min(c[0]+s,v),h]]:[[a,Math.max(c[1]-s,u)],[v,Math.min(c[1]+s,h)]])}return o()}const ie=["CDU","SPD","GR\xDCNE","AfD","DIE LINKE","FDP","Others"],At={CDU:"#000000",SPD:"#E3000F",GR\u00DCNE:"#1AA037",AfD:"#0489DB","DIE LINKE":"#E3000F",FDP:"#FFEF00",Others:"#999999"};function jt(n){return At[n]||At.Others}function ee(n,t){const e=t.electionDistrictResults.find(r=>r.electionDistrict.name===n);return(e==null?void 0:e.electionDistrict.electionDistrictMetaData.winnerParty)||""}const re="/information-visualization/";async function oe(){try{const n=await fetch(`${re}data/wahlkreise.json`);if(!n.ok)throw new Error(`Failed to load JSON: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Error loading GeoJSON:",n),n}}const le={id:"wahlkreis-chart"},ae=et({__name:"WahlkreisChart",props:{wahlergebnis:{}},emits:["update:selectedWahlkreis"],setup(n,{emit:t}){const e=n,i=t;function r(a,u){console.log(a);const v=e.wahlergebnis.electionDistrictResults.find(h=>{var o;return h.electionDistrict.name.includes((o=u.properties)==null?void 0:o.LWK_NAME)});pi(".selected-field").attr("stroke","white").attr("stroke-width",1.5).classed("selected-field",!1),Mn(a.target).classed("selected-field",!0).attr("stroke","red").raise(),v&&i("update:selectedWahlkreis",v)}async function l(){const a=new Lt(550,700,{top:40,right:10,bottom:20,left:50,xlabel:20,ylabel:20}),v=Mn("#wahlkreis-chart").attr("width",a.svgWidth).attr("height",a.svgHeight).append("g").attr("transform",`translate(${a.margin.left+a.margin.xlabel} , ${a.margin.top})`),h=await oe(),o=ne().fitSize([a.innerWidth,a.innerHeight],h),s=Hi().projection(o);v.append("g").attr("class","region").selectAll("path").data(h.features).enter().append("path").attr("d",s).attr("class",c=>"LWK"+c.properties.LWK).attr("fill",c=>jt(ee(c.properties.LWK_NAME,e.wahlergebnis))).attr("stroke","white").attr("stroke-width",1.5).attr("stroke-linejoin","round").on("click",(c,f)=>r(c,f))}return rt(async()=>{await l()}),(a,u)=>(on(),ot("svg",le))}}),ue={id:"wahlergebnis-bar-chart"},se=et({__name:"WahlkreisErgebnisBarChart",props:{wahlkreis:{}},setup(n){const t=n;function e(){Mn("#wahlergebnis-bar-chart").selectAll("*").remove()}function i(){const r=new Lt(700,700,{top:40,right:10,bottom:20,left:50,xlabel:20,ylabel:20}),l=50,a=[];ie.forEach(f=>{const g=t.wahlkreis.partyResults.find(w=>w.party.includes(f));g&&a.push(g)});const u={};u.party="Sonstige";const v=a.reduce((f,g)=>f+g.votesPercent,0);u.votesPercent=100-v,a.push(u);const h=ai().domain([0,l]).range([r.innerHeight,0]),o=ui().domain(a.map(f=>f.party)).range([0,r.innerWidth]).padding(.1),c=Mn("#wahlergebnis-bar-chart").attr("width",r.svgWidth).attr("height",r.svgHeight).append("g").attr("transform",`translate(${r.margin.left+r.margin.xlabel} , ${r.margin.top})`);c.selectAll("rect").data(a).enter().append("rect").attr("x",f=>o(f.party)).attr("y",f=>h(f.votesPercent)).attr("width",o.bandwidth()).attr("height",f=>r.innerHeight-h(f.votesPercent)).attr("fill",f=>jt(f.party)),c.append("g").attr("class","axis axis--x").attr("transform",`translate(0,${r.innerHeight})`).call(si(o).tickSize(0).tickPadding(6)),c.append("g").call(ci(h))}return ei(()=>t.wahlkreis,()=>{e(),i()}),rt(()=>{i()}),(r,l)=>(on(),ot("svg",ue))}}),ce="/information-visualization/";async function fe(){try{const n=await fetch(`${ce}data/wahlergebnis.json`);if(!n.ok)throw new Error(`Failed to load JSON: ${n.statusText}`);const t=await n.json();return pe(t)}catch(n){throw n}}function pe(n){const t=Object.keys(n[0]).filter(r),e={};return e.electionState=n[0].Gebietsbezeichnung,e.date=n[0]["Letzte \xC4nderung"],e.electionDistrictResults=[],n.forEach(l=>{e.electionDistrictResults.push(i(l))}),e;function i(l){const a={};return a.electionDistrict={id:l.Gebietsschl\u00FCssel,name:l.Gebietsbezeichnung,voteLocation:l.Gebietstyp,electionDistrictMetaData:{eligble:l.Wahlberechtigte,votes:l["W\xE4hlerinnen und W\xE4hler"],nonValid:l["ung\xFCltige Wahlkreisstimmen"],valid:l["g\xFCltige Wahlkreisstimmen"],tournout:l.Wahlbeteiligung,winnerParty:l["Wahlkreis gewonnen: Wahlvorschlag"]}},a.partyResults=[],t.forEach(u=>{const v={},h=u,o=`${u} (%)`;v.party=u.replace(" Wahlkreisstimmen",""),v.votes=l[h],v.votesPercent=l[o],a.partyResults.push(v)}),a}function r(l){return l.includes("Wahlkreisstimmen")&&!l.includes("(%)")&&!l.includes("g\xFCltige")}}const he={class:"row q-pt-md"},ge={key:0,class:"column items-center"},De=et({__name:"Exercise1",setup(n){const t=zn(void 0),e=zn(void 0),i=zn(!0);function r(l){e.value=l}return rt(async()=>{const l=await fe();t.value=l,e.value=l.electionDistrictResults[0],i.value=!1}),(l,a)=>(on(),Fn(ni,null,{default:ri(()=>[a[0]||(a[0]=xn("h3",null,"Wahlergebnis Landestagswahl:Hessen 2023",-1)),i.value?(on(),Fn(bt,{key:0,color:"primary",size:"10em"})):In("",!0),xn("div",he,[e.value?(on(),ot("div",ge,[oi(se,{wahlkreis:e.value},null,8,["wahlkreis"]),xn("span",null,"Wahlgebiet: "+li(e.value.electionDistrict.name),1)])):In("",!0),t.value?(on(),Fn(ae,{key:1,wahlergebnis:t.value,selectedWahlkreis:e.value,"onUpdate:selectedWahlkreis":r},null,8,["wahlergebnis","selectedWahlkreis"])):In("",!0)])]),_:1}))}});export{De as default};
