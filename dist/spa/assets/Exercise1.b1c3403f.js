import{Q as bt}from"./QSpinnerAudio.b0c2d6c5.js";import{E as ni}from"./ExerciseContainer.a09a84c9.js";import{S as ct,e as ti,f as ii,s as cn}from"./transform.3ec6140b.js";import{S as Ft}from"./svgConfigs.64a9696a.js";import{d as rt,a as ot,o as on,v as at,q as Rn,x as ei,f as ri,c as Ln,w as oi,b as zn,s as In,k as ai,y as li}from"./index.93f39595.js";import{l as ui}from"./linear.be5e5768.js";import{b as si}from"./band.628a8d04.js";import{a as ci,b as fi}from"./axis.0fbd6d3f.js";import"./use-spinner.1e7062e4.js";import"./use-dark.a83eed6f.js";import"./render.8b6c203a.js";import"./init.0b4a962a.js";import"./ordinal.29744db8.js";class b{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const l=e[r],s=t+l,a=Math.abs(t)<Math.abs(l)?t-(s-l):l-(s-t);a&&(e[i++]=a),t=s}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let e=this._n,i,r,l,s=0;if(e>0){for(s=t[--e];e>0&&(i=s,r=t[--e],s=i+r,l=r-(s-i),!l););e>0&&(l<0&&t[e-1]<0||l>0&&t[e-1]>0)&&(r=l*2,i=s+r,r==i-s&&(s=i))}return s}}function*pi(n){for(const t of n)yield*t}function Lt(n){return Array.from(pi(n))}function hi(n){return typeof n=="string"?new ct([document.querySelectorAll(n)],[document.documentElement]):new ct([ii(n)],ti)}var k=1e-6,gi=1e-12,$=Math.PI,B=$/2,ft=$/4,q=$*2,H=180/$,I=$/180,A=Math.abs,zt=Math.atan,vn=Math.atan2,L=Math.cos,di=Math.exp,vi=Math.log,z=Math.sin,Si=Math.sign||function(n){return n>0?1:n<0?-1:0},tn=Math.sqrt,Ei=Math.tan;function yi(n){return n>1?0:n<-1?$:Math.acos(n)}function Sn(n){return n>1?B:n<-1?-B:Math.asin(n)}function J(){}function $n(n,t){n&&ht.hasOwnProperty(n.type)&&ht[n.type](n,t)}var pt={Feature:function(n,t){$n(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)$n(e[i].geometry,t)}},ht={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)n=e[i],t.point(n[0],n[1],n[2])},LineString:function(n,t){Hn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Hn(e[i],t,0)},Polygon:function(n,t){gt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)gt(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)$n(e[i],t)}};function Hn(n,t,e){var i=-1,r=n.length-e,l;for(t.lineStart();++i<r;)l=n[i],t.point(l[0],l[1],l[2]);t.lineEnd()}function gt(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)Hn(n[e],t,1);t.polygonEnd()}function rn(n,t){n&&pt.hasOwnProperty(n.type)?pt[n.type](n,t):$n(n,t)}function qn(n){return[vn(n[1],n[0]),Sn(n[2])]}function ln(n){var t=n[0],e=n[1],i=L(e);return[i*L(t),i*z(t),z(e)]}function wn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Nn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function On(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function mn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Kn(n){var t=tn(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Jn(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return i=t.invert(i,r),i&&n.invert(i[0],i[1])}),e}function Vn(n,t){return A(n)>$&&(n-=Math.round(n/q)*q),[n,t]}Vn.invert=Vn;function It(n,t,e){return(n%=q)?t||e?Jn(vt(n),St(t,e)):vt(n):t||e?St(t,e):Vn}function dt(n){return function(t,e){return t+=n,A(t)>$&&(t-=Math.round(t/q)*q),[t,e]}}function vt(n){var t=dt(n);return t.invert=dt(-n),t}function St(n,t){var e=L(n),i=z(n),r=L(t),l=z(t);function s(a,p){var g=L(p),o=L(a)*g,u=z(a)*g,f=z(p),d=f*e+o*i;return[vn(u*r-d*l,o*e-f*i),Sn(d*r+u*l)]}return s.invert=function(a,p){var g=L(p),o=L(a)*g,u=z(a)*g,f=z(p),d=f*r-u*l;return[vn(u*r+f*l,o*e+d*i),Sn(d*e-o*i)]},s}function wi(n){n=It(n[0]*I,n[1]*I,n.length>2?n[2]*I:0);function t(e){return e=n(e[0]*I,e[1]*I),e[0]*=H,e[1]*=H,e}return t.invert=function(e){return e=n.invert(e[0]*I,e[1]*I),e[0]*=H,e[1]*=H,e},t}function mi(n,t,e,i,r,l){if(!!e){var s=L(t),a=z(t),p=i*e;r==null?(r=t+i*q,l=t-p/2):(r=Et(s,r),l=Et(s,l),(i>0?r<l:r>l)&&(r+=i*q));for(var g,o=r;i>0?o>l:o<l;o-=p)g=qn([s,-a*L(o),-a*z(o)]),n.point(g[0],g[1])}}function Et(n,t){t=ln(t),t[0]-=n,Kn(t);var e=yi(-t[1]);return((-t[2]<0?-e:e)+q-k)%q}function Ot(){var n=[],t;return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:J,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Mn(n,t){return A(n[0]-t[0])<k&&A(n[1]-t[1])<k}function _n(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Tt(n,t,e,i,r){var l=[],s=[],a,p;if(n.forEach(function(c){if(!((y=c.length-1)<=0)){var y,v=c[0],R=c[y],E;if(Mn(v,R)){if(!v[2]&&!R[2]){for(r.lineStart(),a=0;a<y;++a)r.point((v=c[a])[0],v[1]);r.lineEnd();return}R[0]+=2*k}l.push(E=new _n(v,c,null,!0)),s.push(E.o=new _n(v,null,E,!1)),l.push(E=new _n(R,c,null,!1)),s.push(E.o=new _n(R,null,E,!0))}}),!!l.length){for(s.sort(t),yt(l),yt(s),a=0,p=s.length;a<p;++a)s[a].e=e=!e;for(var g=l[0],o,u;;){for(var f=g,d=!0;f.v;)if((f=f.n)===g)return;o=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,p=o.length;a<p;++a)r.point((u=o[a])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(o=f.p.z,a=o.length-1;a>=0;--a)r.point((u=o[a])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,o=f.z,d=!d}while(!f.v);r.lineEnd()}}}function yt(n){if(!!(t=n.length)){for(var t,e=0,i=n[0],r;++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Tn(n){return A(n[0])<=$?n[0]:Si(n[0])*((A(n[0])+$)%q-$)}function _i(n,t){var e=Tn(t),i=t[1],r=z(i),l=[z(e),-L(e),0],s=0,a=0,p=new b;r===1?i=B+k:r===-1&&(i=-B-k);for(var g=0,o=n.length;g<o;++g)if(!!(f=(u=n[g]).length))for(var u,f,d=u[f-1],c=Tn(d),y=d[1]/2+ft,v=z(y),R=L(y),E=0;E<f;++E,c=S,v=P,R=W,d=m){var m=u[E],S=Tn(m),_=m[1]/2+ft,P=z(_),W=L(_),N=S-c,D=N>=0?1:-1,x=D*N,w=x>$,T=v*P;if(p.add(vn(T*D*z(x),R*W+T*L(x))),s+=w?N+D*q:N,w^c>=e^S>=e){var F=Nn(ln(d),ln(m));Kn(F);var C=Nn(l,F);Kn(C);var h=(w^N>=0?-1:1)*Sn(C[2]);(i>h||i===h&&(F[0]||F[1]))&&(a+=w^N>=0?1:-1)}}return(s<-k||s<k&&p<-gi)^a&1}function Gt(n,t,e,i){return function(r){var l=t(r),s=Ot(),a=t(s),p=!1,g,o,u,f={point:d,lineStart:y,lineEnd:v,polygonStart:function(){f.point=R,f.lineStart=E,f.lineEnd=m,o=[],g=[]},polygonEnd:function(){f.point=d,f.lineStart=y,f.lineEnd=v,o=Lt(o);var S=_i(g,i);o.length?(p||(r.polygonStart(),p=!0),Tt(o,Ri,S,e,r)):S&&(p||(r.polygonStart(),p=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),p&&(r.polygonEnd(),p=!1),o=g=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(S,_){n(S,_)&&r.point(S,_)}function c(S,_){l.point(S,_)}function y(){f.point=c,l.lineStart()}function v(){f.point=d,l.lineEnd()}function R(S,_){u.push([S,_]),a.point(S,_)}function E(){a.lineStart(),u=[]}function m(){R(u[0][0],u[0][1]),a.lineEnd();var S=a.clean(),_=s.result(),P,W=_.length,N,D,x;if(u.pop(),g.push(u),u=null,!!W){if(S&1){if(D=_[0],(N=D.length-1)>0){for(p||(r.polygonStart(),p=!0),r.lineStart(),P=0;P<N;++P)r.point((x=D[P])[0],x[1]);r.lineEnd()}return}W>1&&S&2&&_.push(_.pop().concat(_.shift())),o.push(_.filter(Pi))}}return f}}function Pi(n){return n.length>1}function Ri(n,t){return((n=n.x)[0]<0?n[1]-B-k:B-n[1])-((t=t.x)[0]<0?t[1]-B-k:B-t[1])}var wt=Gt(function(){return!0},Mi,Ni,[-$,-B]);function Mi(n){var t=NaN,e=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(l,s){var a=l>0?$:-$,p=A(l-t);A(p-$)<k?(n.point(t,e=(e+s)/2>0?B:-B),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(l,e),r=0):i!==a&&p>=$&&(A(t-i)<k&&(t-=i*k),A(l-a)<k&&(l-=a*k),e=$i(t,e,l,s),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),r=0),n.point(t=l,e=s),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}}function $i(n,t,e,i){var r,l,s=z(n-e);return A(s)>k?zt((z(t)*(l=L(i))*z(e)-z(i)*(r=L(t))*z(n))/(r*l*s)):(t+i)/2}function Ni(n,t,e,i){var r;if(n==null)r=e*B,i.point(-$,r),i.point(0,r),i.point($,r),i.point($,0),i.point($,-r),i.point(0,-r),i.point(-$,-r),i.point(-$,0),i.point(-$,r);else if(A(n[0]-t[0])>k){var l=n[0]<t[0]?$:-$;r=e*l/2,i.point(-l,r),i.point(0,r),i.point(l,r)}else i.point(t[0],t[1])}function Di(n){var t=L(n),e=2*I,i=t>0,r=A(t)>k;function l(o,u,f,d){mi(d,n,e,f,o,u)}function s(o,u){return L(o)*L(u)>t}function a(o){var u,f,d,c,y;return{lineStart:function(){c=d=!1,y=1},point:function(v,R){var E=[v,R],m,S=s(v,R),_=i?S?0:g(v,R):S?g(v+(v<0?$:-$),R):0;if(!u&&(c=d=S)&&o.lineStart(),S!==d&&(m=p(u,E),(!m||Mn(u,m)||Mn(E,m))&&(E[2]=1)),S!==d)y=0,S?(o.lineStart(),m=p(E,u),o.point(m[0],m[1])):(m=p(u,E),o.point(m[0],m[1],2),o.lineEnd()),u=m;else if(r&&u&&i^S){var P;!(_&f)&&(P=p(E,u,!0))&&(y=0,i?(o.lineStart(),o.point(P[0][0],P[0][1]),o.point(P[1][0],P[1][1]),o.lineEnd()):(o.point(P[1][0],P[1][1]),o.lineEnd(),o.lineStart(),o.point(P[0][0],P[0][1],3)))}S&&(!u||!Mn(u,E))&&o.point(E[0],E[1]),u=E,d=S,f=_},lineEnd:function(){d&&o.lineEnd(),u=null},clean:function(){return y|(c&&d)<<1}}}function p(o,u,f){var d=ln(o),c=ln(u),y=[1,0,0],v=Nn(d,c),R=wn(v,v),E=v[0],m=R-E*E;if(!m)return!f&&o;var S=t*R/m,_=-t*E/m,P=Nn(y,v),W=mn(y,S),N=mn(v,_);On(W,N);var D=P,x=wn(W,D),w=wn(D,D),T=x*x-w*(wn(W,W)-1);if(!(T<0)){var F=tn(T),C=mn(D,(-x-F)/w);if(On(C,W),C=qn(C),!f)return C;var h=o[0],M=u[0],O=o[1],G=u[1],K;M<h&&(K=h,h=M,M=K);var sn=M-h,Z=A(sn-$)<k,j=Z||sn<k;if(!Z&&G<O&&(K=O,O=G,G=K),j?Z?O+G>0^C[1]<(A(C[0]-h)<k?O:G):O<=C[1]&&C[1]<=G:sn>$^(h<=C[0]&&C[0]<=M)){var U=mn(D,(-x+F)/w);return On(U,W),[C,qn(U)]}}}function g(o,u){var f=i?n:$-n,d=0;return o<-f?d|=1:o>f&&(d|=2),u<-f?d|=4:u>f&&(d|=8),d}return Gt(s,a,l,i?[0,-n]:[-$,n-$])}function Wi(n,t,e,i,r,l){var s=n[0],a=n[1],p=t[0],g=t[1],o=0,u=1,f=p-s,d=g-a,c;if(c=e-s,!(!f&&c>0)){if(c/=f,f<0){if(c<o)return;c<u&&(u=c)}else if(f>0){if(c>u)return;c>o&&(o=c)}if(c=r-s,!(!f&&c<0)){if(c/=f,f<0){if(c>u)return;c>o&&(o=c)}else if(f>0){if(c<o)return;c<u&&(u=c)}if(c=i-a,!(!d&&c>0)){if(c/=d,d<0){if(c<o)return;c<u&&(u=c)}else if(d>0){if(c>u)return;c>o&&(o=c)}if(c=l-a,!(!d&&c<0)){if(c/=d,d<0){if(c>u)return;c>o&&(o=c)}else if(d>0){if(c<o)return;c<u&&(u=c)}return o>0&&(n[0]=s+o*f,n[1]=a+o*d),u<1&&(t[0]=s+u*f,t[1]=a+u*d),!0}}}}}var fn=1e9,Pn=-fn;function Ci(n,t,e,i){function r(g,o){return n<=g&&g<=e&&t<=o&&o<=i}function l(g,o,u,f){var d=0,c=0;if(g==null||(d=s(g,u))!==(c=s(o,u))||p(g,o)<0^u>0)do f.point(d===0||d===3?n:e,d>1?i:t);while((d=(d+u+4)%4)!==c);else f.point(o[0],o[1])}function s(g,o){return A(g[0]-n)<k?o>0?0:3:A(g[0]-e)<k?o>0?2:1:A(g[1]-t)<k?o>0?1:0:o>0?3:2}function a(g,o){return p(g.x,o.x)}function p(g,o){var u=s(g,1),f=s(o,1);return u!==f?u-f:u===0?o[1]-g[1]:u===1?g[0]-o[0]:u===2?g[1]-o[1]:o[0]-g[0]}return function(g){var o=g,u=Ot(),f,d,c,y,v,R,E,m,S,_,P,W={point:N,lineStart:T,lineEnd:F,polygonStart:x,polygonEnd:w};function N(h,M){r(h,M)&&o.point(h,M)}function D(){for(var h=0,M=0,O=d.length;M<O;++M)for(var G=d[M],K=1,sn=G.length,Z=G[0],j,U,yn=Z[0],en=Z[1];K<sn;++K)j=yn,U=en,Z=G[K],yn=Z[0],en=Z[1],U<=i?en>i&&(yn-j)*(i-U)>(en-U)*(n-j)&&++h:en<=i&&(yn-j)*(i-U)<(en-U)*(n-j)&&--h;return h}function x(){o=u,f=[],d=[],P=!0}function w(){var h=D(),M=P&&h,O=(f=Lt(f)).length;(M||O)&&(g.polygonStart(),M&&(g.lineStart(),l(null,null,1,g),g.lineEnd()),O&&Tt(f,a,h,l,g),g.polygonEnd()),o=g,f=d=c=null}function T(){W.point=C,d&&d.push(c=[]),_=!0,S=!1,E=m=NaN}function F(){f&&(C(y,v),R&&S&&u.rejoin(),f.push(u.result())),W.point=N,S&&o.lineEnd()}function C(h,M){var O=r(h,M);if(d&&c.push([h,M]),_)y=h,v=M,R=O,_=!1,O&&(o.lineStart(),o.point(h,M));else if(O&&S)o.point(h,M);else{var G=[E=Math.max(Pn,Math.min(fn,E)),m=Math.max(Pn,Math.min(fn,m))],K=[h=Math.max(Pn,Math.min(fn,h)),M=Math.max(Pn,Math.min(fn,M))];Wi(G,K,n,t,e,i)?(S||(o.lineStart(),o.point(G[0],G[1])),o.point(K[0],K[1]),O||o.lineEnd(),P=!1):O&&(o.lineStart(),o.point(h,M),P=!1)}E=h,m=M,S=O}return W}}var Xn=n=>n,Gn=new b,Yn=new b,Bt,Ht,Zn,Un,Q={point:J,lineStart:J,lineEnd:J,polygonStart:function(){Q.lineStart=ki,Q.lineEnd=Ai},polygonEnd:function(){Q.lineStart=Q.lineEnd=Q.point=J,Gn.add(A(Yn)),Yn=new b},result:function(){var n=Gn/2;return Gn=new b,n}};function ki(){Q.point=xi}function xi(n,t){Q.point=qt,Bt=Zn=n,Ht=Un=t}function qt(n,t){Yn.add(Un*n-Zn*t),Zn=n,Un=t}function Ai(){qt(Bt,Ht)}var mt=Q,un=1/0,Dn=un,En=-un,Wn=En,Fi={point:Li,lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var n=[[un,Dn],[En,Wn]];return En=Wn=-(Dn=un=1/0),n}};function Li(n,t){n<un&&(un=n),n>En&&(En=n),t<Dn&&(Dn=t),t>Wn&&(Wn=t)}var Cn=Fi,Qn=0,jn=0,pn=0,kn=0,xn=0,an=0,bn=0,nt=0,hn=0,Kt,Jt,X,Y,V={point:nn,lineStart:_t,lineEnd:Pt,polygonStart:function(){V.lineStart=Oi,V.lineEnd=Ti},polygonEnd:function(){V.point=nn,V.lineStart=_t,V.lineEnd=Pt},result:function(){var n=hn?[bn/hn,nt/hn]:an?[kn/an,xn/an]:pn?[Qn/pn,jn/pn]:[NaN,NaN];return Qn=jn=pn=kn=xn=an=bn=nt=hn=0,n}};function nn(n,t){Qn+=n,jn+=t,++pn}function _t(){V.point=zi}function zi(n,t){V.point=Ii,nn(X=n,Y=t)}function Ii(n,t){var e=n-X,i=t-Y,r=tn(e*e+i*i);kn+=r*(X+n)/2,xn+=r*(Y+t)/2,an+=r,nn(X=n,Y=t)}function Pt(){V.point=nn}function Oi(){V.point=Gi}function Ti(){Vt(Kt,Jt)}function Gi(n,t){V.point=Vt,nn(Kt=X=n,Jt=Y=t)}function Vt(n,t){var e=n-X,i=t-Y,r=tn(e*e+i*i);kn+=r*(X+n)/2,xn+=r*(Y+t)/2,an+=r,r=Y*n-X*t,bn+=r*(X+n),nt+=r*(Y+t),hn+=r*3,nn(X=n,Y=t)}var Rt=V;function Xt(n){this._context=n}Xt.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,q);break}}},result:J};var tt=new b,Bn,Yt,Zt,gn,dn,An={point:J,lineStart:function(){An.point=Bi},lineEnd:function(){Bn&&Ut(Yt,Zt),An.point=J},polygonStart:function(){Bn=!0},polygonEnd:function(){Bn=null},result:function(){var n=+tt;return tt=new b,n}};function Bi(n,t){An.point=Ut,Yt=gn=n,Zt=dn=t}function Ut(n,t){gn-=n,dn-=t,tt.add(tn(gn*gn+dn*dn)),gn=n,dn=t}var Mt=An;let $t,Fn,Nt,Dt;class Wt{constructor(t){this._append=t==null?Qt:Hi(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:{this._append`M${t},${e}`,this._point=1;break}case 1:{this._append`L${t},${e}`;break}default:{if(this._append`M${t},${e}`,this._radius!==Nt||this._append!==Fn){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Nt=i,Fn=this._append,Dt=this._,this._=r}this._+=Dt;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Qt(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function Hi(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return Qt;if(t!==$t){const e=10**t;$t=t,Fn=function(r){let l=1;this._+=r[0];for(const s=r.length;l<s;++l)this._+=Math.round(arguments[l]*e)/e+r[l]}}return Fn}function qi(n,t){let e=3,i=4.5,r,l;function s(a){return a&&(typeof i=="function"&&l.pointRadius(+i.apply(this,arguments)),rn(a,r(l))),l.result()}return s.area=function(a){return rn(a,r(mt)),mt.result()},s.measure=function(a){return rn(a,r(Mt)),Mt.result()},s.bounds=function(a){return rn(a,r(Cn)),Cn.result()},s.centroid=function(a){return rn(a,r(Rt)),Rt.result()},s.projection=function(a){return arguments.length?(r=a==null?(n=null,Xn):(n=a).stream,s):n},s.context=function(a){return arguments.length?(l=a==null?(t=null,new Wt(e)):new Xt(t=a),typeof i!="function"&&l.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(l.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const p=Math.floor(a);if(!(p>=0))throw new RangeError(`invalid digits: ${a}`);e=p}return t===null&&(l=new Wt(e)),s},s.projection(n).digits(e).context(t)}function lt(n){return function(t){var e=new it;for(var i in n)e[i]=n[i];return e.stream=t,e}}function it(){}it.prototype={constructor:it,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ut(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),rn(e,n.stream(Cn)),t(Cn.result()),i!=null&&n.clipExtent(i),n}function jt(n,t,e){return ut(n,function(i){var r=t[1][0]-t[0][0],l=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),a=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,p=+t[0][1]+(l-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([a,p])},e)}function Ki(n,t,e){return jt(n,[[0,0],t],e)}function Ji(n,t,e){return ut(n,function(i){var r=+t,l=r/(i[1][0]-i[0][0]),s=(r-l*(i[1][0]+i[0][0]))/2,a=-l*i[0][1];n.scale(150*l).translate([s,a])},e)}function Vi(n,t,e){return ut(n,function(i){var r=+t,l=r/(i[1][1]-i[0][1]),s=-l*i[0][0],a=(r-l*(i[1][1]+i[0][1]))/2;n.scale(150*l).translate([s,a])},e)}var Ct=16,Xi=L(30*I);function kt(n,t){return+t?Zi(n,t):Yi(n)}function Yi(n){return lt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function Zi(n,t){function e(i,r,l,s,a,p,g,o,u,f,d,c,y,v){var R=g-i,E=o-r,m=R*R+E*E;if(m>4*t&&y--){var S=s+f,_=a+d,P=p+c,W=tn(S*S+_*_+P*P),N=Sn(P/=W),D=A(A(P)-1)<k||A(l-u)<k?(l+u)/2:vn(_,S),x=n(D,N),w=x[0],T=x[1],F=w-i,C=T-r,h=E*F-R*C;(h*h/m>t||A((R*F+E*C)/m-.5)>.3||s*f+a*d+p*c<Xi)&&(e(i,r,l,s,a,p,w,T,D,S/=W,_/=W,P,y,v),v.point(w,T),e(w,T,D,S,_,P,g,o,u,f,d,c,y,v))}}return function(i){var r,l,s,a,p,g,o,u,f,d,c,y,v={point:R,lineStart:E,lineEnd:S,polygonStart:function(){i.polygonStart(),v.lineStart=_},polygonEnd:function(){i.polygonEnd(),v.lineStart=E}};function R(N,D){N=n(N,D),i.point(N[0],N[1])}function E(){u=NaN,v.point=m,i.lineStart()}function m(N,D){var x=ln([N,D]),w=n(N,D);e(u,f,o,d,c,y,u=w[0],f=w[1],o=N,d=x[0],c=x[1],y=x[2],Ct,i),i.point(u,f)}function S(){v.point=R,i.lineEnd()}function _(){E(),v.point=P,v.lineEnd=W}function P(N,D){m(r=N,D),l=u,s=f,a=d,p=c,g=y,v.point=m}function W(){e(u,f,o,d,c,y,l,s,r,a,p,g,Ct,i),v.lineEnd=S,S()}return v}}var Ui=lt({point:function(n,t){this.stream.point(n*I,t*I)}});function Qi(n){return lt({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}function ji(n,t,e,i,r){function l(s,a){return s*=i,a*=r,[t+n*s,e-n*a]}return l.invert=function(s,a){return[(s-t)/n*i,(e-a)/n*r]},l}function xt(n,t,e,i,r,l){if(!l)return ji(n,t,e,i,r);var s=L(l),a=z(l),p=s*n,g=a*n,o=s/n,u=a/n,f=(a*e-s*t)/n,d=(a*t+s*e)/n;function c(y,v){return y*=i,v*=r,[p*y-g*v+t,e-g*y-p*v]}return c.invert=function(y,v){return[i*(o*y-u*v+f),r*(d-u*y-o*v)]},c}function bi(n){return ne(function(){return n})()}function ne(n){var t,e=150,i=480,r=250,l=0,s=0,a=0,p=0,g=0,o,u=0,f=1,d=1,c=null,y=wt,v=null,R,E,m,S=Xn,_=.5,P,W,N,D,x;function w(h){return N(h[0]*I,h[1]*I)}function T(h){return h=N.invert(h[0],h[1]),h&&[h[0]*H,h[1]*H]}w.stream=function(h){return D&&x===h?D:D=Ui(Qi(o)(y(P(S(x=h)))))},w.preclip=function(h){return arguments.length?(y=h,c=void 0,C()):y},w.postclip=function(h){return arguments.length?(S=h,v=R=E=m=null,C()):S},w.clipAngle=function(h){return arguments.length?(y=+h?Di(c=h*I):(c=null,wt),C()):c*H},w.clipExtent=function(h){return arguments.length?(S=h==null?(v=R=E=m=null,Xn):Ci(v=+h[0][0],R=+h[0][1],E=+h[1][0],m=+h[1][1]),C()):v==null?null:[[v,R],[E,m]]},w.scale=function(h){return arguments.length?(e=+h,F()):e},w.translate=function(h){return arguments.length?(i=+h[0],r=+h[1],F()):[i,r]},w.center=function(h){return arguments.length?(l=h[0]%360*I,s=h[1]%360*I,F()):[l*H,s*H]},w.rotate=function(h){return arguments.length?(a=h[0]%360*I,p=h[1]%360*I,g=h.length>2?h[2]%360*I:0,F()):[a*H,p*H,g*H]},w.angle=function(h){return arguments.length?(u=h%360*I,F()):u*H},w.reflectX=function(h){return arguments.length?(f=h?-1:1,F()):f<0},w.reflectY=function(h){return arguments.length?(d=h?-1:1,F()):d<0},w.precision=function(h){return arguments.length?(P=kt(W,_=h*h),C()):tn(_)},w.fitExtent=function(h,M){return jt(w,h,M)},w.fitSize=function(h,M){return Ki(w,h,M)},w.fitWidth=function(h,M){return Ji(w,h,M)},w.fitHeight=function(h,M){return Vi(w,h,M)};function F(){var h=xt(e,0,0,f,d,u).apply(null,t(l,s)),M=xt(e,i-h[0],r-h[1],f,d,u);return o=It(a,p,g),W=Jn(t,M),N=Jn(o,W),P=kt(W,_),C()}function C(){return D=x=null,w}return function(){return t=n.apply(this,arguments),w.invert=t.invert&&T,F()}}function st(n,t){return[n,vi(Ei((B+t)/2))]}st.invert=function(n,t){return[n,2*zt(di(t))-B]};function te(){return ie(st).scale(961/q)}function ie(n){var t=bi(n),e=t.center,i=t.scale,r=t.translate,l=t.clipExtent,s=null,a,p,g;t.scale=function(u){return arguments.length?(i(u),o()):i()},t.translate=function(u){return arguments.length?(r(u),o()):r()},t.center=function(u){return arguments.length?(e(u),o()):e()},t.clipExtent=function(u){return arguments.length?(u==null?s=a=p=g=null:(s=+u[0][0],a=+u[0][1],p=+u[1][0],g=+u[1][1]),o()):s==null?null:[[s,a],[p,g]]};function o(){var u=$*i(),f=t(wi(t.rotate()).invert([0,0]));return l(s==null?[[f[0]-u,f[1]-u],[f[0]+u,f[1]+u]]:n===st?[[Math.max(f[0]-u,s),a],[Math.min(f[0]+u,p),g]]:[[s,Math.max(f[1]-u,a)],[p,Math.min(f[1]+u,g)]])}return o()}const ee=["CDU","SPD","GR\xDCNE","AfD","DIE LINKE","FDP","Others"],At={CDU:"#000000",SPD:"#E3000F",GR\u00DCNE:"#1AA037",AfD:"#0489DB","DIE LINKE":"#E3000F",FDP:"#FFEF00",Others:"#999999"};function et(n){return At[n]||At.Others}function re(n,t){const e=t.electionDistrictResults.find(r=>r.electionDistrict.name===n);return(e==null?void 0:e.electionDistrict.electionDistrictMetaData.winnerParty)||""}const oe="/information-visualization/";async function ae(){try{const n=await fetch(`${oe}data/wahlkreise.json`);if(!n.ok)throw new Error(`Failed to load JSON: ${n.statusText}`);return await n.json()}catch(n){throw console.error("Error loading GeoJSON:",n),n}}const le={id:"wahlkreis-chart"},ue=rt({__name:"WahlkreisChart",props:{wahlergebnis:{}},emits:["update:selectedWahlkreis"],setup(n,{emit:t}){const e=n,i=t;function r(p,g){console.log(p);const o=e.wahlergebnis.electionDistrictResults.find(u=>{var f;return u.electionDistrict.name.includes((f=g.properties)==null?void 0:f.LWK_NAME)});hi(".selected-field").attr("stroke","white").attr("stroke-width",1.5).classed("selected-field",!1),cn(p.target).classed("selected-field",!0).attr("stroke","red").raise(),o&&i("update:selectedWahlkreis",o)}function l(p){cn(p.target).transition().duration(50).attr("opacity",".70")}function s(p){cn(p.target).transition().duration(50).attr("opacity","1")}async function a(){const p=new Ft(550,700,{top:40,right:10,bottom:20,left:50,xlabel:20,ylabel:20}),o=cn("#wahlkreis-chart").attr("width",p.svgWidth).attr("height",p.svgHeight).append("g").attr("transform",`translate(${p.margin.left+p.margin.xlabel} , ${p.margin.top})`),u=await ae(),f=te().fitSize([p.innerWidth,p.innerHeight],u),d=qi().projection(f);o.append("g").attr("class","region").selectAll("path").data(u.features).enter().append("path").attr("d",d).attr("class",c=>"LWK"+c.properties.LWK).attr("fill",c=>et(re(c.properties.LWK_NAME,e.wahlergebnis))).attr("stroke","white").attr("stroke-width",1.5).attr("stroke-linejoin","round").on("click",(c,y)=>r(c,y)).on("mouseover",c=>l(c)).on("mouseout",c=>s(c))}return ot(async()=>{await a()}),(p,g)=>(on(),at("svg",le))}}),se={id:"wahlergebnis-bar-chart"},ce=rt({__name:"WahlkreisErgebnisBarChart",props:{partyResults:{}},setup(n){const t=n,e=Rn(()=>{});function i(){const r=new Ft(700,700,{top:40,right:10,bottom:20,left:50,xlabel:20,ylabel:20}),l=50,s=ui().domain([0,l]).range([r.innerHeight,0]),a=si().domain(t.partyResults.map(f=>f.party)).range([0,r.innerWidth]).padding(.1),g=cn("#wahlergebnis-bar-chart").attr("width",r.svgWidth).attr("height",r.svgHeight).append("g").attr("transform",`translate(${r.margin.left+r.margin.xlabel}, ${r.margin.top})`);g.append("g").attr("class","axis axis--x").attr("transform",`translate(0,${r.innerHeight})`).call(ci(a).tickSize(0).tickPadding(6)),g.append("g").call(fi(s));const o=g.append("g").attr("class","bars");function u(){const f=o.selectAll("rect").data(t.partyResults,c=>c.party);f.transition().duration(500).attr("y",c=>s(c.votesPercent)).attr("height",c=>r.innerHeight-s(c.votesPercent)).attr("fill",c=>et(c.party)),f.enter().append("rect").attr("x",c=>a(c.party)).attr("y",s(0)).attr("width",a.bandwidth()).attr("height",0).attr("fill",c=>et(c.party)).transition().duration(500).attr("y",c=>s(c.votesPercent)).attr("height",c=>r.innerHeight-s(c.votesPercent)),f.exit().transition().duration(500).attr("height",0).attr("y",s(0)).remove();const d=o.selectAll("text").data(t.partyResults,c=>c.party);d.transition().duration(500).attr("x",c=>a(c.party)+a.bandwidth()/2).attr("y",c=>s(c.votesPercent)-5).text(c=>`${c.votesPercent.toFixed(1)}%`),d.enter().append("text").attr("x",c=>a(c.party)+a.bandwidth()/2).attr("y",s(0)).attr("text-anchor","middle").attr("fill","black").text(c=>`${c.votesPercent.toFixed(1)}%`).transition().duration(500).attr("y",c=>s(c.votesPercent)-5),d.exit().transition().duration(500).attr("y",s(0)).remove()}return u(),u}return ot(()=>{const r=i();e.value=r}),ei(()=>t.partyResults,()=>{e.value()}),(r,l)=>(on(),at("svg",se))}}),fe="/information-visualization/";async function pe(){try{const n=await fetch(`${fe}data/wahlergebnis.json`);if(!n.ok)throw new Error(`Failed to load JSON: ${n.statusText}`);const t=await n.json();return he(t)}catch(n){throw n}}function he(n){const t=Object.keys(n[0]).filter(r),e={};return e.electionState=n[0].Gebietsbezeichnung,e.date=n[0]["Letzte \xC4nderung"],e.electionDistrictResults=[],n.forEach(l=>{e.electionDistrictResults.push(i(l))}),e;function i(l){const s={};return s.electionDistrict={id:l.Gebietsschl\u00FCssel,name:l.Gebietsbezeichnung,voteLocation:l.Gebietstyp,electionDistrictMetaData:{eligble:l.Wahlberechtigte,votes:l["W\xE4hlerinnen und W\xE4hler"],nonValid:l["ung\xFCltige Wahlkreisstimmen"],valid:l["g\xFCltige Wahlkreisstimmen"],tournout:l.Wahlbeteiligung,winnerParty:l["Wahlkreis gewonnen: Wahlvorschlag"]}},s.partyResults=[],t.forEach(a=>{const p={},g=a,o=`${a} (%)`;p.party=a.replace(" Wahlkreisstimmen",""),p.votes=l[g],p.votesPercent=l[o],s.partyResults.push(p)}),s}function r(l){return l.includes("Wahlkreisstimmen")&&!l.includes("(%)")&&!l.includes("g\xFCltige")}}const ge={class:"row q-pt-md"},de={key:0,class:"column items-center"},We=rt({__name:"Exercise1",setup(n){const t=Rn(void 0),e=Rn(void 0),i=Rn(!0);function r(a){e.value=a}const l=ri(()=>s());function s(){if(!e.value)return[];const a=[];ee.forEach(o=>{const u=e.value.partyResults.find(f=>f.party.includes(o));u&&a.push(u)});const p={};p.party="Sonstige";const g=a.reduce((o,u)=>o+u.votesPercent,0);return p.votesPercent=100-g,a.push(p),a}return ot(async()=>{const a=await pe();t.value=a,e.value=a.electionDistrictResults[0],i.value=!1}),(a,p)=>(on(),Ln(ni,null,{default:oi(()=>[p[0]||(p[0]=zn("h3",null,"Wahlergebnis Landtagswahl:Hessen 2023",-1)),i.value?(on(),Ln(bt,{key:0,color:"primary",size:"10em"})):In("",!0),zn("div",ge,[e.value?(on(),at("div",de,[ai(ce,{partyResults:l.value},null,8,["partyResults"]),zn("span",null,"Wahlgebiet: "+li(e.value.electionDistrict.name),1)])):In("",!0),t.value?(on(),Ln(ue,{key:1,wahlergebnis:t.value,selectedWahlkreis:e.value,"onUpdate:selectedWahlkreis":r},null,8,["wahlergebnis","selectedWahlkreis"])):In("",!0)])]),_:1}))}});export{We as default};
