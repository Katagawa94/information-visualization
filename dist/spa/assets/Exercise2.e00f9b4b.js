import{Q as y}from"./QSpinnerAudio.41220aae.js";import{E as S}from"./ExerciseContainer.3cde9840.js";import{s as A}from"./transform.36d866f3.js";import{S as C}from"./models.0d1b92b4.js";import{S as E}from"./sdmxDataParser.b51d0eda.js";import{t as _,e as w}from"./time.fcfab602.js";import{d as O,q as D,a as R,o as d,c as f,w as V,b as m,t as g,s as B}from"./index.ec09342b.js";import{l as N}from"./linear.f42d7650.js";import{a as P,b as H}from"./axis.0fbd6d3f.js";import"./use-spinner.870f917c.js";import"./use-dark.109bd397.js";import"./render.14a57c26.js";import"./init.0b4a962a.js";const k="https://data.un.org/ws/rest/data/UIS,DF_UNData_UIS,1.1/.ED_FSOABS.....FRA+DEU+NOR./ALL/?detail=full&dimensionAtObservation=TIME_PERIOD",Y=O({__name:"Exercise2",setup(I){const c=D(!0);function u(e){const o={timePeriods:e.getTimePeriods().map(a=>new Date(a.id)),observations:[]};return e.getRefAreas().forEach(a=>{const l=e.getObservationsByRefArea(a.id),r=l?Object.values(l).map(i=>i[0]):[];o.observations.push({refArea:a.name,observationValues:r})}),o}R(async()=>{fetch(k,{method:"GET",headers:{Accept:"text/json"}}).then(e=>e.json()).then(e=>{const t=new E(JSON.stringify(e)),o=u(t);c.value=!1,h(o)})});function h(e){const t=new C(600,400,{top:20,right:20,bottom:20,left:50,xlabel:20,ylabel:20}),o=Math.max(...e.observations.flatMap(n=>n.observationValues)),s=_().rangeRound([0,t.innerWidth]),a=N().rangeRound([t.innerHeight,0]);s.domain(w(e.timePeriods,n=>n)),a.domain([0,o]);const r=A("#plotContainer").attr("width",t.svgWidth).attr("height",t.svgHeight).append("g").attr("transform",`translate(${t.margin.left+t.margin.xlabel}, ${t.margin.top})`);r.append("g").attr("transform",`translate(0, ${t.innerHeight})`).call(P(s).ticks(5)),r.append("g").call(H(a)),r.append("text").attr("text-anchor","middle").attr("x",t.innerWidth/2).attr("y",t.svgHeight-t.margin.top).text("Year"),r.append("text").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",0-t.innerHeight/2).attr("y",0-t.margin.left).text("Students Abroad");const i=["#69b3a2","#ff6347","#4682b4"];e.observations.forEach((n,x)=>{const b=i[x%i.length];r.append("g").selectAll("circle").data(n.observationValues).enter().append("circle").attr("cx",(p,v)=>s(e.timePeriods[v])).attr("cy",p=>a(p)).attr("r",4).style("fill",b)})}return(e,t)=>(d(),f(S,null,{default:V(()=>[t[0]||(t[0]=m("h2",null,[g(" Students from a given country "),m("br"),g(" studying abroad - Scatter ")],-1)),c.value?(d(),f(y,{key:0,color:"primary",size:"10em"})):B("",!0),t[1]||(t[1]=m("svg",{id:"plotContainer"},null,-1))]),_:1}))}});export{Y as default};
