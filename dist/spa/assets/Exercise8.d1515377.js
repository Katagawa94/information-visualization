import{E as ln}from"./ExerciseContainer.3cde9840.js";import{s as cn}from"./transform.36d866f3.js";import{d as fn,a as gn,o as pn,c as dn,w as mn,b as sn}from"./index.ec09342b.js";import{o as hn}from"./ordinal.29744db8.js";import{c as yn}from"./colors.6aafad43.js";import{w as xn,c as b,a as vn}from"./array.fd924281.js";import"./use-dark.109bd397.js";import"./render.14a57c26.js";import"./init.0b4a962a.js";var An=yn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");const un=Math.abs,M=Math.atan2,S=Math.cos,Mn=Math.max,tn=Math.min,N=Math.sin,D=Math.sqrt,P=1e-12,H=Math.PI,U=H/2,Q=2*H;function Rn(t){return t>1?0:t<-1?H:Math.acos(t)}function on(t){return t>=1?U:t<=-1?-U:Math.asin(t)}function bn(t){return t.innerRadius}function wn(t){return t.outerRadius}function Tn(t){return t.startAngle}function Pn(t){return t.endAngle}function $n(t){return t&&t.padAngle}function Cn(t,o,p,x,v,h,f,n){var c=p-t,s=x-o,e=f-v,g=n-h,a=g*c-e*s;if(!(a*a<P))return a=(e*(o-h)-g*(t-v))/a,[t+a*c,o+a*s]}function L(t,o,p,x,v,h,f){var n=t-p,c=o-x,s=(f?h:-h)/D(n*n+c*c),e=s*c,g=-s*n,a=t+e,u=o+g,d=p+e,m=x+g,E=(a+d)/2,l=(u+m)/2,R=d-a,A=m-u,y=R*R+A*A,w=v-h,T=a*m-d*u,k=(A<0?-1:1)*D(Mn(0,w*w*y-T*T)),q=(T*A-R*k)/y,I=(-T*R-A*k)/y,B=(T*A+R*k)/y,$=(-T*R+A*k)/y,C=q-E,r=I-l,i=B-E,O=$-l;return C*C+r*r>i*i+O*O&&(q=B,I=$),{cx:q,cy:I,x01:-e,y01:-g,x11:q*(v/w-1),y11:I*(v/w-1)}}function En(){var t=bn,o=wn,p=b(0),x=null,v=Tn,h=Pn,f=$n,n=null,c=xn(s);function s(){var e,g,a=+t.apply(this,arguments),u=+o.apply(this,arguments),d=v.apply(this,arguments)-U,m=h.apply(this,arguments)-U,E=un(m-d),l=m>d;if(n||(n=e=c()),u<a&&(g=u,u=a,a=g),!(u>P))n.moveTo(0,0);else if(E>Q-P)n.moveTo(u*S(d),u*N(d)),n.arc(0,0,u,d,m,!l),a>P&&(n.moveTo(a*S(m),a*N(m)),n.arc(0,0,a,m,d,l));else{var R=d,A=m,y=d,w=m,T=E,k=E,q=f.apply(this,arguments)/2,I=q>P&&(x?+x.apply(this,arguments):D(a*a+u*u)),B=tn(un(u-a)/2,+p.apply(this,arguments)),$=B,C=B,r,i;if(I>P){var O=on(I/a*N(q)),z=on(I/u*N(q));(T-=O*2)>P?(O*=l?1:-1,y+=O,w-=O):(T=0,y=w=(d+m)/2),(k-=z*2)>P?(z*=l?1:-1,R+=z,A-=z):(k=0,R=A=(d+m)/2)}var W=u*S(R),j=u*N(R),F=a*S(w),G=a*N(w);if(B>P){var J=u*S(A),K=u*N(A),X=a*S(y),Y=a*N(y),V;if(E<H)if(V=Cn(W,j,X,Y,J,K,F,G)){var Z=W-V[0],_=j-V[1],nn=J-V[0],en=K-V[1],rn=1/N(Rn((Z*nn+_*en)/(D(Z*Z+_*_)*D(nn*nn+en*en)))/2),an=D(V[0]*V[0]+V[1]*V[1]);$=tn(B,(a-an)/(rn-1)),C=tn(B,(u-an)/(rn+1))}else $=C=0}k>P?C>P?(r=L(X,Y,W,j,u,C,l),i=L(J,K,F,G,u,C,l),n.moveTo(r.cx+r.x01,r.cy+r.y01),C<B?n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(i.y01,i.x01),!l):(n.arc(r.cx,r.cy,C,M(r.y01,r.x01),M(r.y11,r.x11),!l),n.arc(0,0,u,M(r.cy+r.y11,r.cx+r.x11),M(i.cy+i.y11,i.cx+i.x11),!l),n.arc(i.cx,i.cy,C,M(i.y11,i.x11),M(i.y01,i.x01),!l))):(n.moveTo(W,j),n.arc(0,0,u,R,A,!l)):n.moveTo(W,j),!(a>P)||!(T>P)?n.lineTo(F,G):$>P?(r=L(F,G,J,K,a,-$,l),i=L(W,j,X,Y,a,-$,l),n.lineTo(r.cx+r.x01,r.cy+r.y01),$<B?n.arc(r.cx,r.cy,$,M(r.y01,r.x01),M(i.y01,i.x01),!l):(n.arc(r.cx,r.cy,$,M(r.y01,r.x01),M(r.y11,r.x11),!l),n.arc(0,0,a,M(r.cy+r.y11,r.cx+r.x11),M(i.cy+i.y11,i.cx+i.x11),l),n.arc(i.cx,i.cy,$,M(i.y11,i.x11),M(i.y01,i.x01),!l))):n.arc(0,0,a,w,y,l)}if(n.closePath(),e)return n=null,e+""||null}return s.centroid=function(){var e=(+t.apply(this,arguments)+ +o.apply(this,arguments))/2,g=(+v.apply(this,arguments)+ +h.apply(this,arguments))/2-H/2;return[S(g)*e,N(g)*e]},s.innerRadius=function(e){return arguments.length?(t=typeof e=="function"?e:b(+e),s):t},s.outerRadius=function(e){return arguments.length?(o=typeof e=="function"?e:b(+e),s):o},s.cornerRadius=function(e){return arguments.length?(p=typeof e=="function"?e:b(+e),s):p},s.padRadius=function(e){return arguments.length?(x=e==null?null:typeof e=="function"?e:b(+e),s):x},s.startAngle=function(e){return arguments.length?(v=typeof e=="function"?e:b(+e),s):v},s.endAngle=function(e){return arguments.length?(h=typeof e=="function"?e:b(+e),s):h},s.padAngle=function(e){return arguments.length?(f=typeof e=="function"?e:b(+e),s):f},s.context=function(e){return arguments.length?(n=e==null?null:e,s):n},s}function Bn(t,o){return o<t?-1:o>t?1:o>=t?0:NaN}function Nn(t){return t}function Vn(){var t=Nn,o=Bn,p=null,x=b(0),v=b(Q),h=b(0);function f(n){var c,s=(n=vn(n)).length,e,g,a=0,u=new Array(s),d=new Array(s),m=+x.apply(this,arguments),E=Math.min(Q,Math.max(-Q,v.apply(this,arguments)-m)),l,R=Math.min(Math.abs(E)/s,h.apply(this,arguments)),A=R*(E<0?-1:1),y;for(c=0;c<s;++c)(y=d[u[c]=c]=+t(n[c],c,n))>0&&(a+=y);for(o!=null?u.sort(function(w,T){return o(d[w],d[T])}):p!=null&&u.sort(function(w,T){return p(n[w],n[T])}),c=0,g=a?(E-s*A)/a:0;c<s;++c,m=l)e=u[c],y=d[e],l=m+(y>0?y*g:0)+A,d[e]={data:n[e],index:c,value:y,startAngle:m,endAngle:l,padAngle:R};return d}return f.value=function(n){return arguments.length?(t=typeof n=="function"?n:b(+n),f):t},f.sortValues=function(n){return arguments.length?(o=n,p=null,f):o},f.sort=function(n){return arguments.length?(p=n,o=null,f):p},f.startAngle=function(n){return arguments.length?(x=typeof n=="function"?n:b(+n),f):x},f.endAngle=function(n){return arguments.length?(v=typeof n=="function"?n:b(+n),f):v},f.padAngle=function(n){return arguments.length?(h=typeof n=="function"?n:b(+n),f):h},f}const zn=fn({__name:"Exercise8",setup(t){return gn(()=>{const o=[{label:"Android",value:40.11},{label:"Windows",value:36.69},{label:"iOS",value:13.06}],p=500,x=500,v=Math.min(p,x)/2,h=cn(".pie-chart");h.attr("width",p).attr("height",x);const f=h.append("g").attr("transform",`translate(${p/2}, ${x/2})`),n=hn(An),c=Vn().value(g=>g.value),s=En().innerRadius(0).outerRadius(v),e=f.selectAll(".arc").data(c(o)).enter().append("g");e.append("path").attr("d",s).attr("fill",g=>n(g.data.label)),e.selectAll(".arc").data(c(o)).enter().append("text").attr("transform",g=>`translate(${s.centroid(g)})`).attr("text-anchor","middle").text(g=>g.data.label).style("font-family","Arial")}),(o,p)=>(pn(),dn(ln,null,{default:mn(()=>p[0]||(p[0]=[sn("h2",null,"Pie Chart",-1),sn("svg",{class:"pie-chart"},null,-1)])),_:1}))}});export{zn as default};
