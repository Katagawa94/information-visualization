import{Q as y}from"./QSpinnerAudio.b2090ded.js";import{E as A}from"./ExerciseContainer.1237914e.js";import{r as x,s as w}from"./transform.36d866f3.js";import{S as C}from"./models.0d1b92b4.js";import{S as E}from"./sdmxDataParser.b51d0eda.js";import{d as _,q as B,a as O,o as g,c as b,w as R,b as u,t as h,s as k}from"./index.736792e7.js";import{b as v}from"./band.628a8d04.js";import{I as D,o as I}from"./ordinal.29744db8.js";import{c as N}from"./colors.6aafad43.js";import{l as j}from"./linear.f42d7650.js";import{m as H}from"./max.0df7e00c.js";import{a as T,b as U}from"./axis.0fbd6d3f.js";import"./use-spinner.d1a1de23.js";import"./use-dark.f662dfdc.js";import"./render.37684453.js";import"./init.0b4a962a.js";function $(f){return f}function z(f,...l){return F(f,Array.from,$,l)}function F(f,l,p,m){return function a(e,r){if(r>=m.length)return p(e);const n=new D,i=m[r++];let c=-1;for(const o of e){const s=i(o,++c,e),d=n.get(s);d?d.push(o):n.set(s,[o])}for(const[o,s]of n)n.set(o,a(s,r));return l(n)}(f,0)}var L=f=>x(f[f.length-1]),S=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(N);L(S);const M="https://data.un.org/ws/rest/data/UIS,DF_UNData_UIS,1.1/.ED_FSOABS.....FRA+DEU+NOR./ALL/?detail=full&dimensionAtObservation=TIME_PERIOD",oe=_({__name:"Exercise3",setup(f){const l=B(!0);function p(a){const e=[],r=a.getTimePeriods().map(i=>i.name);return a.getRefAreas().forEach(i=>{const c=a.getObservationsByRefArea(i.id);(c?Object.values(c).map(s=>s[0]):[]).forEach((s,d)=>{e.push({refArea:i.name,year:r[d],value:s})})}),e}O(async()=>{fetch(M,{method:"GET",headers:{Accept:"text/json"}}).then(a=>a.json()).then(a=>{const e=new E(JSON.stringify(a)),r=p(e);l.value=!1,m(r)})});function m(a){const e=new C(600,400,{top:20,right:20,bottom:20,left:50,xlabel:20,ylabel:20}),r=v().domain(new Set(a.map(t=>t.year.toString()))).rangeRound([0,e.innerWidth]).padding(.1),n=new Set(a.map(t=>t.refArea.toString())),i=I().domain(n).range(S[n.size]).unknown("#ccc"),c=v().domain(n).rangeRound([0,r.bandwidth()]).padding(.05),o=j().domain([0,H(a,t=>t.value)]).nice().rangeRound([e.innerHeight,0]),d=w("#plotContainer").attr("width",e.svgWidth).attr("height",e.svgHeight).append("g").attr("transform",`translate(${e.margin.left+e.margin.xlabel}, ${e.margin.top})`);d.append("g").attr("transform",`translate(0, ${e.innerHeight})`).call(T(r).tickSizeOuter(0)).call(t=>{t.selectAll(".domain").remove()}),d.append("g").call(U(o)),d.append("g").selectAll("circle").data(z(a,t=>t.year)).join("g").attr("transform",([t])=>`translate(${r(t.toString())},0)`).selectAll().data(([,t])=>t).join("rect").attr("x",t=>c(t.refArea)).attr("y",t=>o(t.value)).attr("width",c.bandwidth()).attr("height",t=>e.innerHeight-o(t.value)).attr("fill",t=>i(t.refArea))}return(a,e)=>(g(),b(A,null,{default:R(()=>[e[0]||(e[0]=u("h2",null,[h(" Students from a given country "),u("br"),h(" studying abroad - Bar ")],-1)),l.value?(g(),b(y,{key:0,color:"primary",size:"10em"})):k("",!0),e[1]||(e[1]=u("svg",{id:"plotContainer"},null,-1))]),_:1}))}});export{oe as default};
